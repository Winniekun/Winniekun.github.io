---
title: 数据库的范式
date: 2020-08-04 21:44:06
tags:
categories:
thumbnail:
---



## 数据库范式设计

<!--more-->

范式是数据表设计的基本原则，又很容易被忽略。很多时候，当数据库运行了一段时间之后，我们才发现数据表设计得有问题。重新调整数据表的结构，就需要做数据迁移，还有可能影响程序的业务逻辑，以及网站正常的访问。所以在开始设置数据库的时候，我们就需要重视数据表的设计。





## 数据表中的一些键

范式的定义会使用到主键和候选键(主键和候选键可以唯一的标识元组), 数据库中的键由一个或者多个属性组成, 常用的几种键和属性的定义如下

1. 超键
   * 能唯一标识元组的属性集称为超集
2. 候选键
   * 超键中不包含多余属性
3. 主键
   * 用户从候选键中选择一个作为主键
4. 主属性
   * 包含在任意候选键中的属性
5. 非主属性
   * 和主属性相反, 即不包含在任何一个候选集中的属性

### 举例说明

假如有如下两个表

1. 学生表(学号(唯一), 姓名, 性别, 身份证号(唯一), 教师编号)
2. 教师表(教师编号, 姓名, 工资)

#### 超键

1. 学生表中的超键
   1. 学号
   2. (学号, 姓名)
   3. (学号, 姓名, 性别)
   4. (学号, 姓名, 性别, 身份证号)
   5. (学号, 姓名, 性别, 身份证号, 教师编号)
   6. 身份证号
   7. (身份证号, 姓名)
   8. ...

2. 教师表中的超键
   1. 教师编号
   2. (教师编号, 姓名)
   3. ...

#### 候选键

候选键属于超键，它是最小的超键，就是说如果再去掉候选键中的任何一个属性它就不再是超键了。

1. 学生表中的候选键
   1. 学号
   2. 身份证号

2. 教师表中的候选键
   1. 教师编号

#### 主键

主键就是候选键里面的一个，是人为规定的，例如学生表中，我们通常会让“学号”做主键，教师表中让“教师编号”做主键。

1. 学生表中的主键可以为
   1. 学号
   2. 身份证号

2. 教师表中的主键可以为
   1. 教师编号

#### 主属性

1. 学生表中
   1. 学号
   2. 身份证号

#### 非主属性

1. 学生表
   1. 姓名
   2. 性别
   3. 教师编号



## 从1NF到3NF

### 1NF

**1NF 指的是数据库表中的任何属性都是原子性的，不可再分**。这很好理解，我们在设计某个字段的时候，对于字段 X 来说，就不能把字段 X 拆分成字段 X-1 和字段 X-2。事实上，任何的 DBMS 都会满足第一范式的要求，不会将字段进行拆分。

### 2NF

**2NF 指的数据表里的非主属性都要和这个数据表的候选键有完全依赖关系**。所谓完全依赖不同于部分依赖，也就是不能仅依赖候选键的一部分属性，而必须依赖其全部属性。



### 3NF

**3NF在满足2NF的基础上, 对任何非主属性都不传递依赖于主属性**, 也就是说不能存在非主属性 A 依赖于非主属性 B，非主属性 B 依赖于候选键的情况。



### 总结

1NF 需要保证表中每个属性都保持原子性；2NF 需要保证表中的非主属性与候选键完全依赖；3NF 需要保证表中的非主属性与候选键不存在传递依赖。